# Python

## Links

- [Force Restart Faild Gunicor Service](https://unix.stackexchange.com/questions/513972/how-to-fix-start-limit-hit-trying-to-start-gunicorn-on-ubuntu-18#answer-552135)
- [Django-Active-Link](https://github.com/valerymelou/django-active-link)
- [Django-Betterforms](https://github.com/fusionbox/django-betterforms)
- [Django-Compressor](https://github.com/django-compressor/django-compressor)
- [Django-Pursed](https://github.com/alej0varas/django-pursed)
- [Django-Debug-Toolbar](https://github.com/jazzband/django-debug-toolbar)
- [Django-Jalali](https://github.com/slashmili/django-jalali)
- [Django-Tagging](https://github.com/Fantomas42/django-tagging)
- [Django-Summernote: Editor For Django Project.](https://github.com/summernote/django-summernote)
- [Django-Tinymce: Tinymce Editor For Django](https://github.com/aljosa/django-tinymce)
- [Django-Unix Date Time Field](https://pypi.org/project/django-unixdatetimefield/)
- [Django-Material-Admin · Pypi](https://pypi.org/project/django-material-admin/)
- [Unixdatetimefield For Django Model](https://github.com/Niklas9/django-unixdatetimefield)
- [Django-River - Django Workflow With On The Fly Changes](https://github.com/javrasya/django-river)
- [Django River-Admin - Admin Interface For Django-River](https://github.com/javrasya/river-admin)
- [Misago - Forum Application](https://github.com/rafalp/misago)
- [Django-Video-Encoding - Convert Your Videos Into Different Formats And Resolutions With Ffmpeg](https://github.com/escaped/django-video-encoding)
- [Django-Rest-Swagger - Django Rest Swagger](https://django-rest-swagger.readthedocs.io/en/latest/)
- [Django-Guardian - Per Object Permissions For Django](https://github.com/django-guardian/django-guardian)
- [Django Waffle — Adding Dev And Product Condition To Django](https://waffle.readthedocs.io/en/stable/)
- [Django-Helpdesk - Ticketing](https://github.com/django-helpdesk/django-helpdesk)
- [Django-Push-Notifications - Send Push Notifications To Mobile](https://github.com/jazzband/django-push-notifications)
- [Djangorestframework · Pypi](https://pypi.org/project/djangorestframework/)
- [Django-Haystack: Modular Search For Django](https://github.com/django-haystack/django-haystack)
- [Drf_Haystack](https://drf-haystack.readthedocs.io/en/latest/)
- [Django Choices](https://django-choices.readthedocs.io/en/latest/)
- [Django-Mptt | Tree In Django](https://django-mptt.readthedocs.io/en/latest/)
- [Django-Filter - Drf Dynamic Query Set From User Params](https://github.com/carltongibson/django-filter/tree/master)
- [Dry-Rest-Permissions](https://github.com/dbkaplan/dry-rest-permissions)
- [Drf-Extensions](http://chibisov.github.io/drf-extensions/docs/)
- [Django-Crispy-Forms - Form Generator](https://django-crispy-forms.readthedocs.io/en/latest/)
- [Django-Extensions](https://django-extensions.readthedocs.io/en/latest/installation_instructions.html)
- [Cors - Django-Cors-Headers](https://github.com/adamchainz/django-cors-headers)
- [Django-Cprofile-Middleware - Helpful Django Cprofiling Middleware](https://github.com/omarish/django-cprofile-middleware/)
- [Django-Rules - Awesome Django Authorization, Without The Database](https://github.com/dfunckt/django-rules)
- [Django-Stdimage - Standard Image Field](https://pypi.org/project/django-stdimage/)
- [Django-Autocomplete-Light](https://django-autocomplete-light.readthedocs.io/en/master/)
- [Django-Simple-History](https://django-simple-history.readthedocs.io/en/latest/)
- [Github - Pydanny/Cookiecutter-Django: Cookiecutter Django Is A Framework For Jumpstarting Production-Ready Django Projects Quickly.](https://github.com/pydanny/cookiecutter-django)
- [Django-Widget-Tweaks | Form Field Rendering In Templates](https://github.com/jazzband/django-widget-tweaks)
- [Psycopg2 Error](https://github.com/netbox-community/netbox/issues/1914)
- [Django-Summernote Image Upload Size Limit](https://stackoverflow.com/questions/32615292/changing-image-upload-size-limit-in-django-summernote#answer-32615731)
- [Custom Permission_Classes For Default Django Rest Framework Methods](https://stackoverflow.com/questions/35970970/django-rest-framework-permission-classes-of-viewset-method)
- [Django3 Language Code Error](https://stackoverflow.com/questions/59156630/translation-e004-you-have-provided-a-value-for-the-language-code-setting-that-i#answer-59157763)
- [Revert The Last Migration](https://stackoverflow.com/questions/32123477/how-to-revert-the-last-migration#answer-32124113)
- [Reverse Many2Many Inline Admin](https://stackoverflow.com/questions/10904848/adding-inline-many-to-many-objects-in-django-admin)
- [&#39;Searchqueryset&#39; Object Has No Attribute &#39;Model&#39;](https://github.com/rhblind/drf-haystack/issues/115#issuecomment-422703167)
- [Haystack Field Lookups](https://django-haystack.readthedocs.io/en/master/searchqueryset_api.html#field-lookups)
- [Run Django, Nginx, And Gunicorn On Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-ubuntu-18-04)
- [Check Django Language Code](https://stackoverflow.com/questions/44801077/how-to-call-ugettext-from-django-shell#answer-44802969)
- [Get The Current Language](https://stackoverflow.com/questions/3356964/how-i-get-the-current-language-in-django#answer-3357141)
- [Language_Code Not Working](https://stackoverflow.com/questions/47063007/django-language-code-en-but-displays-fr#answer-47063904)
- [Resources Translated To Persian (Iran)](https://www.transifex.com/open-edx/dashboard/all_resources/fa_IR/?project=open-edx-releases#1/?o=perc&d=desc)
- [Set Up Django With Postgres, Nginx, And Gunicorn](https://www.digitalocean.com/community/tutorials/how-to-set-up-django-with-postgres-nginx-and-gunicorn-on-debian-10)
- [Relation To Custom Content Model](https://stackoverflow.com/questions/40148630/understanding-django-genericforeignkey-and-genericrelation#answer-40150127)
- [Django Python Support](https://docs.djangoproject.com/en/3.0/faq/install/#what-python-version-can-i-use-with-django)
- [Add A Value Sensitive Unique Together Constraint](https://stackoverflow.com/questions/16474552/is-there-any-more-elegant-way-to-add-a-value-sensitive-unique-together-constrain#answer-59939626)
- [Drf Write_Only_Fields](https://stackoverflow.com/questions/34989915/write-only-read-only-fields-in-django-rest-framework#answer-36771366)
- [Custom Filter With Django_Filters](https://stackoverflow.com/questions/43009538/use-custom-filter-with-django-modelchoice-filter/56280700#56280700)
- [Drf_Extensions Nested Urls Are Not Filtering](https://github.com/chibisov/drf-extensions/issues/196#issuecomment-418995672)
- [Django Query Lookups](https://stackoverflow.com/questions/687295/how-do-i-do-a-not-equal-in-django-queryset-filtering/1155013#1155013)
- [Extra Fields On Many2Many Relationships](https://docs.djangoproject.com/en/2.2/topics/db/models/#extra-fields-on-many-to-many-relationships)
- [Get Translated Choice In Drf](https://stackoverflow.com/questions/62045788/drf-serializer-return-translated-choice-field-value/62062034#62062034)
- [Imagefield() Not Saving Images In Modelform](https://stackoverflow.com/questions/29171077/imagefield-not-saving-images-in-modelform-django-python/29171167#29171167)
- [Deploy A Django App With Gunicorn, Nginx - Real Python](https://realpython.com/django-nginx-gunicorn/)
- [Manually Rollback Transaction](https://stackoverflow.com/questions/34730385/django-rollback-save-with-transaction-atomic/34730527#34730527)
- [Django Crud Class-Based Views](https://medium.com/all-about-django/class-based-views-in-django-89108c1f51fb)
- [Delete All Migrations In Django](https://simpleisbetterthancomplex.com/tutorial/2016/07/26/how-to-reset-migrations.html)
- [Divio - Cloud Project](https://www.divio.com/)
- [Django Model Data Types](https://www.webforefront.com/django/modeldatatypesandvalidation.html)
- [Django Builder](https://djangobuilder.io/#/)
- [All Language Codes](http://www.i18nguy.com/unicode/language-identifiers.html)
- [Python Frameworks, Libraries, Software And Resources](https://github.com/vinta/awesome-python)
- [Mongosql - Lets You Query Sqlalchemy Like A Mongodb Database](https://pypi.org/project/mongosql/)
- [Jdatetime (Jalali Date Time)](https://pypi.org/project/jdatetime/)
- [Cerberus (Json Validator)](https://pypi.org/project/Cerberus/)
- [Rarfile - Rar3 And Rar5 Reader](https://pypi.org/project/rarfile/)
- [Openpyxl - Read, Write Excel Xlsx Files](http://zetcode.com/python/openpyxl/)
- [Sphinx Extension (Contentui)](https://sphinxcontrib-contentui.readthedocs.io/en/latest/index.html)
- [Material Theme For Sphinx](https://github.com/bashtage/sphinx-material/)
- [Sphinx-Copybutton](https://pypi.org/project/sphinx-copybutton/)
- [Diagrams](https://diagrams.mingrammer.com/docs/getting-started/examples)
- [Ai](https://github.com/scikit-learn/scikit-learn)
- [Microsoft Visual C++ 14.0 Is Required](https://stackoverflow.com/questions/44951456/pip-error-microsoft-visual-c-14-0-is-required?rq=1/#answer-44953739)
- [Pip Is Not Working: Importerror: No Module Named &#39;Pip._Internal&#39;](https://askubuntu.com/questions/1025189/pip-is-not-working-importerror-no-module-named-pip-internal?rq=1#answer-1026848)
- [Locale Error: Unsupported Locale Setting](https://stackoverflow.com/questions/14547631/python-locale-error-unsupported-locale-setting#answer-14548156)
- [Locale Problem In Docker](https://serverfault.com/questions/54591/how-to-install-change-locale-on-debian#answer-894545)
- [Codeglance Not Working With Pycharm](https://github.com/vektah/CodeGlance/issues/200#issuecomment-372525465)
- [Celery Timezones Types](https://stackoverflow.com/questions/13866926/is-there-a-list-of-pytz-timezones)
- [Python 3.8 From Source](https://linuxize.com/post/how-to-install-python-3-8-on-ubuntu-18-04/)
- [Install Python 3.5](https://tecadmin.net/install-python-3-5-on-ubuntu/)
- [Ignoring &Quot;Unused Import Statement&Quot;](https://stackoverflow.com/questions/58975633/ignoring-unused-import-statement-in-just-one-file-pycharm#answer-58976423)
- [&Quot;Dot&Quot; Not Found In Path](https://stackoverflow.com/questions/40243753/exception-dot-not-found-in-path-in-python-on-mac#answer-45366612)
- [Pip Require Tls/Ssl](https://stackoverflow.com/questions/45954528/pip-is-configured-with-locations-that-require-tls-ssl-however-the-ssl-module-in#answer-49696062)
- [Pillow, The Headers Or Library Files Could Not Be Found For Zlib](https://stackoverflow.com/questions/44043906/the-headers-or-library-files-could-not-be-found-for-jpeg-installing-pillow-on#answer-49751641)
- [Python Dates Types](https://www.w3schools.com/python/python_datetime.asp)
- [Convert Python File To .Exe](https://m.youtube.com/watch?feature=youtu.be&v=UZX5kH72Yx4)
- [Get The Filepath For A Class](https://stackoverflow.com/questions/697320/how-do-i-get-the-filepath-for-a-class-in-python/697395#697395)
- [All Open File Modes](https://stackoverflow.com/questions/6648493/how-to-open-a-file-for-both-reading-and-writing/58925279#58925279)
- [Best Python Formatter And Beautifier](https://codebeautify.org/python-formatter-beautifier)
- [Time Complexity (Big O)](https://wiki.python.org/moin/TimeComplexity)

## Get All Import Able Modules And Packages

```
import pkgutil
search_path = ['.'] # set to None to see all modules importable from sys.path
all_modules = [x[1] for x in pkgutil.iter_modules(path=search_path)]
print(all_modules)
```

## Celery

Install:

- celery: `pip install celery`
- celery and redis for broker `pip install -U "celery[redis]"`

usage:

```python
# celery_config.py

# config variables must start with "namespace" in .config_from_object function
# for example: CELERY_

CELERY_IMPORTS = ('apps.job.tasks',)  # task files address
CELERY_BROKER_URL = 'redis://localhost:6379/'  # redis as broker
CELERY_RESULT_BACKEND = 'redis://localhost:6379/'  # redis as small db
CELERY_ACCEPT_CONTENT = ['application/json']
CELERY_TASK_SERIALIZER = 'pickle'  # default: 'json'
CELERY_RESULT_SERIALIZER = 'pickle'  # default: 'json'
CELERY_TIMEZONE = 'Asia/Tehran'
```

```python
# celery.py

from __future__ import absolute_import, unicode_literals
import os
from celery import Celery

# set the default Django settings module for the 'celery' program.
CELERY_APP = Celery('<app name: karestoon>')

# Using a string here means the worker doesn't have to serialize
# the configuration object to child processes.
# - namespace='CELERY' means all celery-related configuration keys
#   should have a `CELERY_` prefix.
CELERY_APP.config_from_object('<celery_config.py address>', namespace='CELERY')

# Load task modules from all registered Django app configs.
CELERY_APP.autodiscover_tasks()


# sample task
@CELERY_APP.task(bind=True)
def debug_task(self):
    print('Request: {0!r}'.format(self.request))
    
```

commands:

- kill celery process:

  `kill -9 $(ps aux | grep celery | grep -v grep | awk '{print $2}' | tr '\n' ' ') > /dev/null 2>&1`

- view worker logs: `celery -A <worker name: karestoon> worker --loglevel=info`

## Sphinx

install and start:

1. `pip install sphinx`

2. ```
   mkdir docs
   cd docs
   sphinx-quickstart
   ```

commands:

tip: run commands in `docs` directory

- build dist version of documentation: `make html`
- remove dist version: `make clean`

commands source page: <https://www.sphinx-doc.org/en/master/man/sphinx-build.html>

### Theming

#### Read The Docs Theme

 `pip install sphinx_rtd_theme`

```python
# conf.py

html_theme = 'sphinx_rtd_theme'
html_theme_path = ['_templates',]
```

#### Custom Style

add `extra.css` in `_static/css` directory

```python
# conf.py

def setup(app):
    app.add_stylesheet('css/extra.css')
```

### Extensions

#### Autodoc

```python
# conf.py

import os
import sys
sys.path.insert(0, os.path.abspath('../..'))

extensions = ['sphinx.ext.autodoc']
```

##### Autodoc Sample Usage

```rst
.. automodule:: <python file path: apps.core.models.user>
   :members:
   :undoc-members:
   :show-inheritance:
```

#### Other Doctype Support

```python
# conf.py

extensions = ['sphinx.ext.napoleon']

# Napoleon settings
napoleon_google_docstring = True
napoleon_numpy_docstring = True
napoleon_include_init_with_doc = False
napoleon_include_private_with_doc = False
napoleon_include_special_with_doc = True
napoleon_use_admonition_for_examples = False
napoleon_use_admonition_for_notes = False
napoleon_use_admonition_for_references = False
napoleon_use_ivar = False
napoleon_use_param = True
napoleon_use_rtype = True
```

#### Markdown Support

`pip install recommonmark`

```python
# conf.py

extensions = ['recommonmark']

source_suffix = {
    '.rst': 'restructuredtext',
    '.txt': 'markdown',
    '.md': 'markdown',
}
```

#### Markdown Table Support

`pip install sphinx-markdown-tables`

```python
# conf.py

extensions = ['sphinx_markdown_tables']
```

